{
  "metadata" : {
    "realm" : "/openbanking",
    "amsterVersion" : "6.5.1",
    "entityType" : "Scripts",
    "entityId" : "65e1109c-7f62-4551-a9b2-b67f66dd75fa",
    "pathParams" : { }
  },
  "data" : {
    "_id" : "65e1109c-7f62-4551-a9b2-b67f66dd75fa",
    "name" : "openbanking_payment",
    "description" : null,
    "script" : "LyoKICogQ29weXJpZ2h0IDIwMTUtMjAxNyBGb3JnZVJvY2sgQVMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQKICoKICogVXNlIG9mIHRoaXMgY29kZSByZXF1aXJlcyBhIGNvbW1lcmNpYWwgc29mdHdhcmUgbGljZW5zZSB3aXRoIEZvcmdlUm9jayBBUy4KICogb3Igd2l0aCBvbmUgb2YgaXRzIGFmZmlsaWF0ZXMuIEFsbCB1c2Ugc2hhbGwgYmUgZXhjbHVzaXZlbHkgc3ViamVjdAogKiB0byBzdWNoIGxpY2Vuc2UgYmV0d2VlbiB0aGUgbGljZW5zZWUgYW5kIEZvcmdlUm9jayBBUy4KICovCi8qKgogKiBUaGlzIGlzIGEgUG9saWN5IENvbmRpdGlvbiBleGFtcGxlIHNjcmlwdC4gSXQgZGVtb25zdHJhdGVzIGhvdyB0byBhY2Nlc3MgYSB1c2VyJ3MgaW5mb3JtYXRpb24sCiAqIHVzZSB0aGF0IGluZm9ybWF0aW9uIGluIGV4dGVybmFsIEhUVFAgY2FsbHMgYW5kIG1ha2UgYSBwb2xpY3kgZGVjaXNpb24gYmFzZWQgb24gdGhlIG91dGNvbWUuCiAqLwoKdmFyIGFtb3VudDsKCmlmICh2YWxpZGF0ZUFuZEluaXRpYWxpemVQYXJhbWV0ZXJzKCkpIHsKCiAgICBpZiAoYW1vdW50IDwgMTAwKSB7CiAgICAgICAgbG9nZ2VyLm1lc3NhZ2UoIlBheW1lbnQgaXMgdW5kZXIgYSAxMDDCoywgd2UgZG9uJ3QgdHJpZ2dlciBhIHB1c2ggYXV0aG9yaXphdGlvbiIpOwogICAgICAgIGF1dGhvcml6ZWQgPSBmYWxzZTsKICAgIH0gZWxzZSB7CiAgICAgICAgbG9nZ2VyLm1lc3NhZ2UoIlBheW1lbnQgaXMgb3ZlciBhIDEwMMKjLCB3ZSB0cmlnZ2VyIGEgcHVzaCBhdXRob3JpemF0aW9uIik7CiAgICAgICAgYXV0aG9yaXplZCA9IHRydWU7CiAgICB9Cgp9IGVsc2UgewogICAgbG9nZ2VyLm1lc3NhZ2UoIlJlcXVpcmVkIHBhcmFtZXRlcnMgbm90IGZvdW5kLiBBdXRob3JpemF0aW9uIEZhaWxlZC4iKTsKICAgIGF1dGhvcml6ZWQgPSBmYWxzZTsKfQoKCi8qKgogKiBSZXRyaWV2ZSBhbmQgdmFsaWRhdGUgdGhlIHZhcmlhYmxlcyByZXF1aXJlZCB0byBtYWtlIHRoZSBleHRlcm5hbCBIVFRQIGNhbGxzLgogKgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gV2lsbCBiZSB0cnVlIGlmIHZhbGlkYXRpb24gd2FzIHN1Y2Nlc3NmdWwuCiAqLwpmdW5jdGlvbiB2YWxpZGF0ZUFuZEluaXRpYWxpemVQYXJhbWV0ZXJzKCkgewogICAgaWYgKCFyZXNvdXJjZVVSSSkgewogICAgICAgIGxvZ2dlci53YXJuaW5nKCJObyByZXNvdXJjZSBVUkkgc3BlY2lmaWVkLiIpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGFtb3VudCA9IHBhcnNlRmxvYXQocmVzb3VyY2VVUkkubWF0Y2goL15wYXltZW50XC8oLiopJC8pWzFdKTsKICAgIGxvZ2dlci5tZXNzYWdlKCJQYXltZW50IGFtb3VudDogIiArIGFtb3VudCk7CgogICAgcmV0dXJuIHRydWU7Cn0KCmZ1bmN0aW9uIGxvZ1Jlc3BvbnNlKHJlc3BvbnNlKSB7CiAgICBsb2dnZXIubWVzc2FnZSgiVXNlciBSRVNUIENhbGwuIFN0YXR1czogIiArIHJlc3BvbnNlLmdldFN0YXR1cygpICsgIiwgQm9keTogIiArIHJlc3BvbnNlLmdldEVudGl0eSgpKTsKfQ==",
    "default" : false,
    "language" : "JAVASCRIPT",
    "context" : "POLICY_CONDITION",
    "createdBy" : "null",
    "creationDate" : 0,
    "lastModifiedBy" : "null",
    "lastModifiedDate" : 0
  }
}